// Ion.Zoom
// version 1.2.63
// http://ionden.com/a/plugins/ion.zoom/
(function(c){var C=0,d;d='<div class="ion-zoom-preloader"></div><div class="ion-zoom-image"><div class="ion-zoom-close"><div>&times;</div></div>';d+='<div class="ion-zoom-prev"><div></div></div>';d+='<div class="ion-zoom-next"><div></div></div>';d+="</div>";var D=c(document.body),x=c(window),y,g,E,F;D.append(d);y=c("div.ion-zoom-preloader");g=c("div.ion-zoom-image");E=c("div.ion-zoom-prev");F=c("div.ion-zoom-next");var r=[],z=!1,G=0,j={init:function(k){var h=this;if(!h.data("isActive")){this.pluginCount=
C+=1;r[this.pluginCount]=this;var d=c.extend({visibleControls:!0},k);h.each(function(a){c(this).data("isActive",!0).data("iznum",a)});var l=!1,p=!1,j=h.length,s,t,b={},e=0,u,v,f,w,n;this.closeZoom=function(a){m(!1,a)};var J=function(){g.on("click",function(){m()});d.visibleControls&&(E.on("click",function(a){a.stopPropagation();l&&!p&&H()}),F.on("click",function(a){a.stopPropagation();l&&!p&&I()}))},m=function(a,g){a?A(b.x,b.y,b.w,b.h,!0,!0,g):A(b.x,b.y,b.w,b.h,!0,!1,g)},H=function(){e-=1;var a=h.eq(e);
a.length||(e=j-1,a=h.eq(j-1));w=a;v=a.prop("href");m(!0)},I=function(){e+=1;var a=h.eq(e);a.length||(e=0,a=h.eq(0));w=a;v=a.prop("href");m(!0)},B=function(){var a=parseInt(f.css("border-left-width")),d=parseInt(f.css("padding-left")),c=parseInt(f.children("img").css("border-left-width")),k=parseInt(f.children("img").css("padding-left")),a=a+d,c=c+k;b={x:f.offset().left+a+c,y:f.offset().top+a+c,w:f.width()-2*c,h:f.height()-2*c};c=b.x+b.w/2;y.css("top",b.y+b.h/2).css("left",c);g.append('<img src="'+
u+'" />');n=g.children("img");n.on("load",function(){s=n.width();t=n.height();y.css("top","-9999px").css("left","-9999px");n.width(b.w).height(b.h);g.width(b.w).height(b.h);g.css("left",b.x).css("top",b.y);var a=x.innerWidth()-40,c=x.innerHeight()-40,d=x.scrollTop(),k=t/s,f=b.x+b.w/2-s/2,h=b.y+b.h/2-t/2,e=s,q=t;e>a&&(e=a,q=a*k,f=b.x+b.w/2-e/2);q>c&&(q=c,e=c/k,f=b.x+b.w/2-e/2);f+e>a&&(f=a-e-20);h+q>20+d+c&&(h=d+c-q);20>f&&(f=20);h<d+20&&(h=d+20);A(f,h,e,q,!1,!1)})},A=function(a,b,c,e,k,m,j){p=!0;g.removeClass("isOpen");
d.visibleControls||g.removeClass("noControls");g.stop().animate({left:a,top:b,width:c,height:e},{step:function(a,b){"width"===b.prop&&n.width(a+"px");"height"===b.prop&&n.height(a+"px")},duration:300,complete:function(){k?(g.css("top","-9999px").css("left","-9999px"),g.width("0px").height("0px"),g.children("img").remove(),z=l=!1,m&&(f=w,u=v,B()),j&&j()):(g.addClass("isOpen"),d.visibleControls||g.addClass("noControls"),l=z=!0,G=h.pluginCount);p=!1}})};h.on("click",function(a){a.preventDefault();var b=
c(this);e=b.data("iznum");l?(w=b,v=b.prop("href"),m(!0)):z?r[G].closeZoom(function(){f=b;u=b.prop("href");J();B()}):(f=b,u=b.prop("href"),J(),B())});D.on("keydown",function(a){27===a.which&&l&&m();37===a.which&&(l&&!p)&&H();39===a.which&&(l&&!p)&&I()})}},close:function(){for(var c=1;c<r.length;c++)r[c].closeZoom()}};c.fn.ionZoom=function(d){if(j[d])return j[d].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof d||!d)return j.init.apply(this,arguments);c.error("Method "+d+" does not exist for jQuery.ionZoom")}})(jQuery);